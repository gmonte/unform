import{createContext as r,useContext as n,useMemo as t,useCallback as e,useEffect as o,forwardRef as u,useRef as i,useImperativeHandle as c}from"react";import a from"dot-object";import{jsx as f}from"react/jsx-runtime";import l from"zustand";import s from"zustand/shallow";var p=r({});function d(r){var u=n(p),i=u.initialData,c=u.errors,f=u.scopePath,l=u.unregisterField,s=u.registerField,d=u.clearFieldError;if(!r)throw new Error('You need to provide the "name" prop.');var v=t((function(){return f?f+"."+r:r}),[r,f]),h=t((function(){return a.pick(v,i)}),[v,i]),b=t((function(){return c[v]}),[c,v]),m=e((function(){d(v)}),[d,v]);return o((function(){return function(){return l(v)}}),[v,l]),t((function(){return{fieldName:v,registerField:s,defaultValue:h,clearError:m,error:b}}),[m,h,b,v,s])}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var v=function(){return(v=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)};function h(r,n){var t,e,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,e&&(o=2&u[0]?e.return:u[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,u[1])).done)return o;switch(e=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,e=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(r,i)}catch(r){u=[6,r],e=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var b=function(r){return r},m=u((function(r,n){var o=r.initialData,u=void 0===o?{}:o,d=r.children,m=r.onSubmit,y=i([]),g=t((function(){return l((function(r){return{errors:{},setErrors:function(n){return r((function(){return{errors:n}}))},setFieldError:function(n,t){return r((function(r){var e,o=r.errors;return{errors:v(v({},o),(e={},e[n]=t,e))}}))}}}))}),[])(b,s),E=g.setErrors,w=g.setFieldError,F=g.errors,O=e((function(r){return y.current.find((function(n){return n.name===r}))}),[]),P=e((function(r){var n=r.ref,t=r.getValue,e=r.path;return t?t(n):e&&a.pick(e,n)}),[]),j=e((function(r,n){var t=r.path,e=r.ref,o=r.setValue;return o?o(e,n):!!t&&a.set(t,n,e)}),[]),x=e((function(r){var n=r.clearValue,t=r.ref,e=r.path;return n?n(t,""):e&&a.set(e,"",t)}),[]),k=e((function(r){void 0===r&&(r={}),y.current.forEach((function(n){var t=n.name,e=n.ref,o=n.path,u=n.clearValue;return u?u(e,r[t]):o&&a.set(o,r[t]?r[t]:"",e)}))}),[]),V=e((function(r){var n={};y.current.forEach((function(t){n[t.name]=a.pick(t.name,r)})),Object.entries(n).forEach((function(r){var n=r[0],t=r[1],e=O(n);e&&j(e,t)}))}),[O,j]),D=e((function(r,n){void 0===n&&(n=!0);var t=r;n&&(t=a.dot(r)),E(t)}),[E]),S=e((function(){var r={};return y.current.forEach((function(n){r[n.name]=P(n)})),a.object(r),r}),[P]),z=e((function(r){return n=void 0,t=void 0,o=function(){var n;return h(this,(function(t){return r&&r.preventDefault(),n=S(),m(n,{reset:k},r),[2]}))},new((e=void 0)||(e=Promise))((function(r,u){function i(r){try{a(o.next(r))}catch(r){u(r)}}function c(r){try{a(o.throw(r))}catch(r){u(r)}}function a(n){n.done?r(n.value):new e((function(r){r(n.value)})).then(i,c)}a((o=o.apply(n,t||[])).next())}));var n,t,e,o}),[m,S,k]),I=e((function(r){y.current.push(r)}),[]),G=e((function(r){var n=y.current.findIndex((function(n){return n.name===r}));n>-1&&y.current.splice(n,1)}),[]),N=e((function(r){w(r,void 0)}),[w]);c(n,(function(){return{getFieldValue:function(r){var n=O(r);return!!n&&P(n)},setFieldValue:function(r,n){var t=O(r);return!!t&&j(t,n)},getFieldError:function(r){return F[r]},setFieldError:function(r,n){w(r,n)},clearField:function(r){var n=O(r);n&&x(n)},getErrors:function(){return F},setErrors:function(r,n){return D(r,n)},getData:function(){return S()},getFieldRef:function(r){var n=O(r);return!!n&&n.ref},setData:function(r){return V(r)},reset:function(r){return k(r)},submitForm:function(){z()}}}));var R=t((function(){return{initialData:u,errors:F,scopePath:"",registerField:I,unregisterField:G,clearFieldError:N,handleSubmit:z}}),[N,F,z,u,I,G]);return f(p.Provider,v({value:R},{children:d}),void 0)}));function y(r){var t=r.path,e=r.children,o=n(p),u=o.scopePath,i=function(r,n){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&n.indexOf(e)<0&&(t[e]=r[e]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(r);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(r,e[o])&&(t[e[o]]=r[e[o]])}return t}(o,["scopePath"]);return f(p.Provider,v({value:v(v({},i),{scopePath:u.concat(u?"."+t:t)})},{children:e}),void 0)}export{p as FormContext,m as FormProvider,y as Scope,d as useField};
//# sourceMappingURL=index.es.js.map
